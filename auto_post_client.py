import requests
from concurrent.futures import ThreadPoolExecutor

# async def file_sender(file_name=None):

#     async with aiofiles.open(file_name, 'r') as f:
#         chunk = await f.read(64*1024*1024)
#         while chunk:
#             yield chunk
#             chunk = await f.read(64*1024*1024) 
#     #return chunk

# form_data = (
#     "./imagens/090015.jpg",
#     "./imagens/heart.jpg",
#     "./imagens/Schedule.png"
# )

# async def tester(request):
#     url = 'http://90016.90017.0.0:5000/'
#     dir = os.path.join(os.getcwd(), 'imagens/')
#     f = random.choice(os.listdir(dir))
#     file = os.path.join(dir, f)
#     #print(file)
#     files = {'file': open(file, 'rb')}
#     response = await requests.post('url', data=files)
    
#     if response.status_code == requests.codes.bad:
#         print('Headers: {} Response: {}'.format(response.headers, response.text))


def main(n, url):
    
    files = {'file': open(n, 'rb')}
    data = {'files': 'file', "filename": n}
    print(files["file"])
    return requests.post(url, files = files, data = data)
    # async with aiohttp.ClientSession() as session:
    #     with await session.post('http://0.0.0.0:5000/', data=n) as resp:
    #         print(resp.status)
    #         print(await resp.text())
        #ficheiro = file_sender(file_name)
        #async with session.post('http://0.0.0.0:5000/', data = ficheiro) as resp:
        #    print(resp.status)
        #    print(await resp.text())
        #with open(file_name, 'rb') as f:
        #    await session.post('http://0.0.0.0:5000?Key=file', data=f)
         
with ThreadPoolExecutor(max_workers=10) as pool:
    url='http://0.0.0.0:5000/upload'

    #block comment: shift+alt+a
    #cut triple quotes and paste them where desired
    #change max workers too

    pool.submit(main,"client_files/090000.jpg", url)
    pool.submit(main,"client_files/090001.jpg", url)
    pool.submit(main,"client_files/090002.jpg", url)
    pool.submit(main,"client_files/090003.jpg", url)
    pool.submit(main,"client_files/090004.jpg", url)
    pool.submit(main,"client_files/090005.jpg", url)
    pool.submit(main,"client_files/090006.jpg", url)
    pool.submit(main,"client_files/090007.jpg", url)
    pool.submit(main,"client_files/090008.jpg", url)
    pool.submit(main,"client_files/090009.jpg", url) #10
    """ pool.submit(main,"client_files/090010.jpg", url)
    pool.submit(main,"client_files/090011.jpg", url)
    pool.submit(main,"client_files/090012.jpg", url)
    pool.submit(main,"client_files/090013.jpg", url)
    pool.submit(main,"client_files/090014.jpg", url)
    pool.submit(main,"client_files/090015.jpg", url)
    pool.submit(main,"client_files/090016.jpg", url)
    pool.submit(main,"client_files/090017.jpg", url)
    pool.submit(main,"client_files/090018.jpg", url)
    pool.submit(main,"client_files/090019.jpg", url) #20
    pool.submit(main,"client_files/090020.jpg", url)
    pool.submit(main,"client_files/090021.jpg", url)
    pool.submit(main,"client_files/090022.jpg", url) 
    pool.submit(main,"client_files/090023.jpg", url)
    pool.submit(main,"client_files/090024.jpg", url)
    pool.submit(main,"client_files/090025.jpg", url)
    pool.submit(main,"client_files/090026.jpg", url)
    pool.submit(main,"client_files/090027.jpg", url)
    pool.submit(main,"client_files/090028.jpg", url)
    pool.submit(main,"client_files/090029.jpg", url) #30
    pool.submit(main,"client_files/090030.jpg", url)
    pool.submit(main,"client_files/090031.jpg", url)
    pool.submit(main,"client_files/090032.jpg", url)
    pool.submit(main,"client_files/090033.jpg", url)
    pool.submit(main,"client_files/090034.jpg", url)
    pool.submit(main,"client_files/090035.jpg", url)
    pool.submit(main,"client_files/090036.jpg", url)
    pool.submit(main,"client_files/090037.jpg", url)
    pool.submit(main,"client_files/090038.jpg", url)
    pool.submit(main,"client_files/090039.jpg", url) #40
    pool.submit(main,"client_files/090040.jpg", url)
    pool.submit(main,"client_files/090041.jpg", url)
    pool.submit(main,"client_files/090042.jpg", url)
    pool.submit(main,"client_files/090043.jpg", url)
    pool.submit(main,"client_files/090044.jpg", url)
    pool.submit(main,"client_files/090045.jpg", url)
    pool.submit(main,"client_files/090046.jpg", url)
    pool.submit(main,"client_files/090047.jpg", url)
    pool.submit(main,"client_files/090048.jpg", url)
    pool.submit(main,"client_files/090049.jpg", url) #50
    pool.submit(main,"client_files/090050.jpg", url)
    pool.submit(main,"client_files/090051.jpg", url)
    pool.submit(main,"client_files/090052.jpg", url)
    pool.submit(main,"client_files/090053.jpg", url)
    pool.submit(main,"client_files/090054.jpg", url)
    pool.submit(main,"client_files/090055.jpg", url)
    pool.submit(main,"client_files/090056.jpg", url)
    pool.submit(main,"client_files/090057.jpg", url)
    pool.submit(main,"client_files/090058.jpg", url)
    pool.submit(main,"client_files/090059.jpg", url) #60
    pool.submit(main,"client_files/090060.jpg", url)
    pool.submit(main,"client_files/090061.jpg", url)
    pool.submit(main,"client_files/090062.jpg", url)
    pool.submit(main,"client_files/090063.jpg", url)
    pool.submit(main,"client_files/090064.jpg", url)
    pool.submit(main,"client_files/090065.jpg", url)
    pool.submit(main,"client_files/090066.jpg", url)
    pool.submit(main,"client_files/090067.jpg", url)
    pool.submit(main,"client_files/090068.jpg", url)
    pool.submit(main,"client_files/090069.jpg", url) #70
    pool.submit(main,"client_files/090070.jpg", url)
    pool.submit(main,"client_files/090071.jpg", url)
    pool.submit(main,"client_files/090072.jpg", url)
    pool.submit(main,"client_files/090073.jpg", url)
    pool.submit(main,"client_files/090074.jpg", url)
    pool.submit(main,"client_files/090075.jpg", url)
    pool.submit(main,"client_files/090076.jpg", url)
    pool.submit(main,"client_files/090077.jpg", url)
    pool.submit(main,"client_files/090078.jpg", url)
    pool.submit(main,"client_files/090079.jpg", url) #80
    pool.submit(main,"client_files/090080.jpg", url)
    pool.submit(main,"client_files/090081.jpg", url)
    pool.submit(main,"client_files/090082.jpg", url)
    pool.submit(main,"client_files/090083.jpg", url)
    pool.submit(main,"client_files/090084.jpg", url)
    pool.submit(main,"client_files/090085.jpg", url)
    pool.submit(main,"client_files/090086.jpg", url)
    pool.submit(main,"client_files/090087.jpg", url)
    pool.submit(main,"client_files/090088.jpg", url)
    pool.submit(main,"client_files/090089.jpg", url) #90
    pool.submit(main,"client_files/090090.jpg", url)
    pool.submit(main,"client_files/090091.jpg", url)
    pool.submit(main,"client_files/090092.jpg", url)
    pool.submit(main,"client_files/090093.jpg", url)
    pool.submit(main,"client_files/090094.jpg", url)
    pool.submit(main,"client_files/090095.jpg", url)
    pool.submit(main,"client_files/090096.jpg", url)
    pool.submit(main,"client_files/090097.jpg", url)
    pool.submit(main,"client_files/090098.jpg", url)
    pool.submit(main,"client_files/090099.jpg", url) #100
    pool.submit(main,"client_files/090100.jpg", url)
    pool.submit(main,"client_files/090101.jpg", url)
    pool.submit(main,"client_files/090102.jpg", url)
    pool.submit(main,"client_files/090103.jpg", url)
    pool.submit(main,"client_files/090104.jpg", url)
    pool.submit(main,"client_files/090105.jpg", url)
    pool.submit(main,"client_files/090106.jpg", url)
    pool.submit(main,"client_files/090107.jpg", url)
    pool.submit(main,"client_files/090108.jpg", url)
    pool.submit(main,"client_files/090109.jpg", url)
    pool.submit(main,"client_files/090110.jpg", url)
    pool.submit(main,"client_files/090111.jpg", url)
    pool.submit(main,"client_files/090112.jpg", url)
    pool.submit(main,"client_files/090113.jpg", url)
    pool.submit(main,"client_files/090114.jpg", url)
    pool.submit(main,"client_files/090115.jpg", url)
    pool.submit(main,"client_files/090116.jpg", url)
    pool.submit(main,"client_files/090117.jpg", url)
    pool.submit(main,"client_files/090118.jpg", url)
    pool.submit(main,"client_files/090119.jpg", url)
    pool.submit(main,"client_files/090120.jpg", url)
    pool.submit(main,"client_files/090121.jpg", url)
    pool.submit(main,"client_files/090122.jpg", url)
    pool.submit(main,"client_files/090123.jpg", url)
    pool.submit(main,"client_files/090124.jpg", url) 
    pool.submit(main,"client_files/090125.jpg", url)
    pool.submit(main,"client_files/090126.jpg", url)
    pool.submit(main,"client_files/090127.jpg", url)
    pool.submit(main,"client_files/090128.jpg", url)
    pool.submit(main,"client_files/090129.jpg", url)
    pool.submit(main,"client_files/090130.jpg", url)
    pool.submit(main,"client_files/090131.jpg", url)
    pool.submit(main,"client_files/090132.jpg", url)
    pool.submit(main,"client_files/090133.jpg", url)
    pool.submit(main,"client_files/090134.jpg", url)
    pool.submit(main,"client_files/090135.jpg", url)
    pool.submit(main,"client_files/090136.jpg", url)
    pool.submit(main,"client_files/090137.jpg", url)
    pool.submit(main,"client_files/090138.jpg", url)
    pool.submit(main,"client_files/090139.jpg", url)
    pool.submit(main,"client_files/090140.jpg", url)
    pool.submit(main,"client_files/090141.jpg", url)
    pool.submit(main,"client_files/090142.jpg", url)
    pool.submit(main,"client_files/090143.jpg", url)
    pool.submit(main,"client_files/090144.jpg", url)
    pool.submit(main,"client_files/090145.jpg", url)
    pool.submit(main,"client_files/090146.jpg", url)
    pool.submit(main,"client_files/090147.jpg", url)
    pool.submit(main,"client_files/090148.jpg", url)
    pool.submit(main,"client_files/090149.jpg", url)
    pool.submit(main,"client_files/090150.jpg", url)
    pool.submit(main,"client_files/090151.jpg", url)
    pool.submit(main,"client_files/090152.jpg", url)
    pool.submit(main,"client_files/090153.jpg", url)
    pool.submit(main,"client_files/090154.jpg", url)
    pool.submit(main,"client_files/090155.jpg", url)
    pool.submit(main,"client_files/090156.jpg", url)
    pool.submit(main,"client_files/090157.jpg", url)
    pool.submit(main,"client_files/090158.jpg", url)
    pool.submit(main,"client_files/090159.jpg", url)
    pool.submit(main,"client_files/090160.jpg", url)
    pool.submit(main,"client_files/090161.jpg", url)
    pool.submit(main,"client_files/090162.jpg", url)
    pool.submit(main,"client_files/090163.jpg", url)
    pool.submit(main,"client_files/090164.jpg", url)
    pool.submit(main,"client_files/090165.jpg", url)
    pool.submit(main,"client_files/090166.jpg", url)
    pool.submit(main,"client_files/090167.jpg", url)
    pool.submit(main,"client_files/090168.jpg", url)
    pool.submit(main,"client_files/090169.jpg", url)
    pool.submit(main,"client_files/090170.jpg", url)
    pool.submit(main,"client_files/090171.jpg", url)
    pool.submit(main,"client_files/090172.jpg", url)
    pool.submit(main,"client_files/090173.jpg", url)
    pool.submit(main,"client_files/090174.jpg", url)
    pool.submit(main,"client_files/090175.jpg", url)
    pool.submit(main,"client_files/090176.jpg", url)
    pool.submit(main,"client_files/090177.jpg", url)
    pool.submit(main,"client_files/090178.jpg", url)
    pool.submit(main,"client_files/090179.jpg", url)
    pool.submit(main,"client_files/090180.jpg", url)
    pool.submit(main,"client_files/090181.jpg", url)
    pool.submit(main,"client_files/090182.jpg", url)
    pool.submit(main,"client_files/090183.jpg", url)
    pool.submit(main,"client_files/090184.jpg", url)
    pool.submit(main,"client_files/090185.jpg", url)
    pool.submit(main,"client_files/090186.jpg", url)
    pool.submit(main,"client_files/090187.jpg", url)
    pool.submit(main,"client_files/090188.jpg", url)
    pool.submit(main,"client_files/090189.jpg", url)
    pool.submit(main,"client_files/090190.jpg", url)
    pool.submit(main,"client_files/090191.jpg", url)
    pool.submit(main,"client_files/090192.jpg", url)
    pool.submit(main,"client_files/090193.jpg", url)
    pool.submit(main,"client_files/090194.jpg", url)
    pool.submit(main,"client_files/090195.jpg", url)
    pool.submit(main,"client_files/090196.jpg", url)
    pool.submit(main,"client_files/090197.jpg", url)
    pool.submit(main,"client_files/090198.jpg", url)
    pool.submit(main,"client_files/090199.jpg", url) #200
    pool.submit(main,"client_files/090200.jpg", url)
    pool.submit(main,"client_files/090201.jpg", url)
    pool.submit(main,"client_files/090202.jpg", url)
    pool.submit(main,"client_files/090203.jpg", url)
    pool.submit(main,"client_files/090204.jpg", url)
    pool.submit(main,"client_files/090205.jpg", url)
    pool.submit(main,"client_files/090206.jpg", url)
    pool.submit(main,"client_files/090207.jpg", url)
    pool.submit(main,"client_files/090208.jpg", url)
    pool.submit(main,"client_files/090209.jpg", url)
    pool.submit(main,"client_files/090210.jpg", url)
    pool.submit(main,"client_files/090211.jpg", url)
    pool.submit(main,"client_files/090212.jpg", url)
    pool.submit(main,"client_files/090213.jpg", url)
    pool.submit(main,"client_files/090214.jpg", url)
    pool.submit(main,"client_files/090215.jpg", url)
    pool.submit(main,"client_files/090216.jpg", url)
    pool.submit(main,"client_files/090217.jpg", url)
    pool.submit(main,"client_files/090218.jpg", url)
    pool.submit(main,"client_files/090219.jpg", url)
    pool.submit(main,"client_files/090220.jpg", url)
    pool.submit(main,"client_files/090221.jpg", url)
    pool.submit(main,"client_files/090222.jpg", url)
    pool.submit(main,"client_files/090223.jpg", url)
    pool.submit(main,"client_files/090224.jpg", url)
    pool.submit(main,"client_files/090225.jpg", url)
    pool.submit(main,"client_files/090226.jpg", url)
    pool.submit(main,"client_files/090227.jpg", url)
    pool.submit(main,"client_files/090228.jpg", url)
    pool.submit(main,"client_files/090229.jpg", url)
    pool.submit(main,"client_files/090230.jpg", url)
    pool.submit(main,"client_files/090231.jpg", url)
    pool.submit(main,"client_files/090232.jpg", url)
    pool.submit(main,"client_files/090233.jpg", url)
    pool.submit(main,"client_files/090234.jpg", url)
    pool.submit(main,"client_files/090235.jpg", url)
    pool.submit(main,"client_files/090236.jpg", url)
    pool.submit(main,"client_files/090237.jpg", url)
    pool.submit(main,"client_files/090238.jpg", url)
    pool.submit(main,"client_files/090239.jpg", url)
    pool.submit(main,"client_files/090240.jpg", url)
    pool.submit(main,"client_files/090241.jpg", url)
    pool.submit(main,"client_files/090242.jpg", url)
    pool.submit(main,"client_files/090243.jpg", url)
    pool.submit(main,"client_files/090244.jpg", url)
    pool.submit(main,"client_files/090245.jpg", url)
    pool.submit(main,"client_files/090246.jpg", url)
    pool.submit(main,"client_files/090247.jpg", url)
    pool.submit(main,"client_files/090248.jpg", url)
    pool.submit(main,"client_files/090249.jpg", url)
    pool.submit(main,"client_files/090250.jpg", url)
    pool.submit(main,"client_files/090251.jpg", url)
    pool.submit(main,"client_files/090252.jpg", url)
    pool.submit(main,"client_files/090253.jpg", url)
    pool.submit(main,"client_files/090254.jpg", url)
    pool.submit(main,"client_files/090255.jpg", url)
    pool.submit(main,"client_files/090256.jpg", url)
    pool.submit(main,"client_files/090257.jpg", url)
    pool.submit(main,"client_files/090258.jpg", url)
    pool.submit(main,"client_files/090259.jpg", url)
    pool.submit(main,"client_files/090260.jpg", url)
    pool.submit(main,"client_files/090261.jpg", url)
    pool.submit(main,"client_files/090262.jpg", url)
    pool.submit(main,"client_files/090263.jpg", url)
    pool.submit(main,"client_files/090264.jpg", url)
    pool.submit(main,"client_files/090265.jpg", url)
    pool.submit(main,"client_files/090266.jpg", url)
    pool.submit(main,"client_files/090267.jpg", url)
    pool.submit(main,"client_files/090268.jpg", url)
    pool.submit(main,"client_files/090269.jpg", url)
    pool.submit(main,"client_files/090270.jpg", url)
    pool.submit(main,"client_files/090271.jpg", url)
    pool.submit(main,"client_files/090272.jpg", url)
    pool.submit(main,"client_files/090273.jpg", url)
    pool.submit(main,"client_files/090274.jpg", url)
    pool.submit(main,"client_files/090275.jpg", url)
    pool.submit(main,"client_files/090276.jpg", url)
    pool.submit(main,"client_files/090277.jpg", url)
    pool.submit(main,"client_files/090278.jpg", url)
    pool.submit(main,"client_files/090279.jpg", url)
    pool.submit(main,"client_files/090280.jpg", url)
    pool.submit(main,"client_files/090281.jpg", url)
    pool.submit(main,"client_files/090282.jpg", url)
    pool.submit(main,"client_files/090283.jpg", url)
    pool.submit(main,"client_files/090284.jpg", url)
    pool.submit(main,"client_files/090285.jpg", url)
    pool.submit(main,"client_files/090286.jpg", url)
    pool.submit(main,"client_files/090287.jpg", url)
    pool.submit(main,"client_files/090288.jpg", url)
    pool.submit(main,"client_files/090289.jpg", url)
    pool.submit(main,"client_files/090290.jpg", url)
    pool.submit(main,"client_files/090291.jpg", url)
    pool.submit(main,"client_files/090292.jpg", url)
    pool.submit(main,"client_files/090293.jpg", url)
    pool.submit(main,"client_files/090294.jpg", url)
    pool.submit(main,"client_files/090295.jpg", url)
    pool.submit(main,"client_files/090296.jpg", url)
    pool.submit(main,"client_files/090297.jpg", url)
    pool.submit(main,"client_files/090298.jpg", url)
    pool.submit(main,"client_files/090299.jpg", url) #300 """